{% extends 'base/base.html' %}
{% block title %}
Add Post
{% endblock %}
{% block content %}
<div class="container d-flex justify-content-center align-items-center vh-100">
    <div class="card shadow-sm p-4" style="max-width: 400px; width: 100%;">
      <h4 class="mb-3 text-center">Create Post</h4>
      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <!-- Image Preview -->
        <div class="mb-3 text-center">
          <img id="image-preview" src="#" alt="Preview" class="img-fluid rounded d-none" style="max-height: 250px;">
        </div>
  
        <!-- File Input -->
        <div class="mb-3">
          <label for="formFile" class="form-label">Upload Image</label>
          <input name="image" class="form-control" type="file" id="formFile" accept="image/*" onchange="previewImage(event)" required>
        </div>
  
        <!-- Caption -->
        <div class="mb-3">
          <label for="caption" class="form-label">Caption</label>
          <textarea name="caption" class="form-control" id="caption" rows="3" placeholder="Write a caption..."></textarea>
        </div>
  
        <!-- Submit -->
        <div class="d-grid">
          <button type="submit" class="btn btn-primary">Post</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    function previewImage(event) {
      const input = event.target;
      const preview = document.getElementById('image-preview');
  
      if (input.files && input.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
          preview.src = e.target.result;
          preview.classList.remove('d-none');
        };
        reader.readAsDataURL(input.files[0]);
      }
    }
  </script>
{% endblock %}    
  
{% extends 'base/base.html'%} 
{% load static %} 
{% block title %} My Account
{% endblock %} 
{% block content %}
<!-- ========= Main Content =============== -->
<!-- ========= Message box  =============== -->
{% include 'includes/messages.html' %}
<!-- ========= Mesaage box end  =============== -->

<div class="container py-5">
  <div class="row">
    <!-- Sidebar -->
    <div class="col-md-3">
      <!-- position-fixed custom-show-product-btn  -->
      <div class="card text-center">
        <div class="card-body">
          {% if data.url %}
          <img src="{{data.url}}" class="profile-img mb-3" alt="Profile" />
          {% else %}
          <img
            src="{% static 'images/default_profile.png' %}"
            class="profile-img mb-3"
            alt="Profile"
          />
          {% endif %}
          <h6 class="card-title">
            {{data.first_name | upper }}{{data.last_name | upper }}
          </h6>
          <p class="text-muted">{{data.email}}</p>
        </div>
      </div>
      <div class="list-group mt-4">
        <a
          href="#dashboard"
          class="list-group-item list-group-item-action active"
          data-bs-toggle="tab"
          >Dashboard</a
        >
        <a
          href="#profile"
          class="list-group-item list-group-item-action"
          data-bs-toggle="tab"
          >Profile Information</a
        >
        <a
          href="#users"
          class="list-group-item list-group-item-action"
          data-bs-toggle="tab"
          >Manage Users</a
        >
        <a
          href="#settings"
          class="list-group-item list-group-item-action"
          data-bs-toggle="tab"
          >Settings</a
        >
      </div>
      <div class="my-2">
        <a href="{% url 'ecommerce:product' %}" class="btn btn-success col-12"
          >Go To Product Management</a
        >
      </div>
    </div>

    <!-- Content Area -->
    <div class="col-md-9">
      <div class="tab-content">
        <!-- Dashboard -->
        <div class="tab-pane fade show active" id="dashboard">
          <div class="card">
            <div class="card-header">Admin Dashboard Overview</div>
            <div class="card-body">
              <p><strong>Total Users : </strong> {{data.total_user}}</p>
              <p><strong>Total Orders : </strong> {{data.total_order}}</p>
              <p><strong>Total Product : </strong> {{data.total_product}}</p>
            </div>
          </div>
        </div>

        <!-- Manage Users -->
        <div class="tab-pane fade" id="users">
          <div class="card">
            <div class="card-header">User Management</div>
            <div class="card-body">
              <table class="table">
                <thead>
                  <tr>
                    <th>S.NO</th>
                    <th>Name</th>
                    <!-- <th>Email</th> -->
                    <th>Status</th>
                  </tr>
                </thead>
                <tbody>
                  {% if users %} {% for user in users %}
                  <tr>
                    <td>{{forloop.counter}}</td>
                    <td>{{user}}</td>
                    <!-- <td>{{user.email}}</td> -->
                    {% if user.is_active %}
                    <td><span class="badge bg-success">Active</span></td>
                    {% else %}
                    <td><span class="badge bg-danger">Blocked</span></td>
                    {% endif %}
                  </tr>
                  {% endfor %} {% endif %}

                  <!-- Add more rows dynamically -->
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Reports -->
        <div class="tab-pane fade" id="profile">
          <div class="card">
            <div class="card-header">Profile Information</div>
            <div class="card-body">
              <p><strong>Name:</strong> {{data.first_name | default:'' }}</p>
              <p><strong>Email:</strong> {{data.email | default:''}}</p>
              <p>
                <strong>Phone:</strong> +91 {{data.phone_number | default:'' }}
              </p>
              <p><strong>Address:</strong> {{data.address | default:''}}</p>
            </div>
          </div>
        </div>
        <!-- Settings -->
        <div class="tab-pane fade" id="settings">
          <div class="card">
            <div class="card-header">Admin Settings</div>
            <div class="card-body">
              <form
                class=""
                enctype="multipart/form-data"
                autocomplete="off"
                method="post"
              >
                {% csrf_token %}
                <div class="mb-3">
                  <label class="form-label">First Name</label>
                  <input
                    name="first_name"
                    value="{{data.first_name | default:''}}"
                    type="text"
                    class="form-control"
                    placeholder="First Name"
                  />
                </div>
                <div class="mb-3">
                  <label class="form-label">Last Name</label>
                  <input
                    name="last_name"
                    value="{{data.last_name | default:''}}"
                    type="text"
                    class="form-control"
                    placeholder="Last Name"
                  />
                </div>
                <div class="mb-3">
                  <label class="form-label"> Email</label>
                  <input
                    name="email"
                    value="{{data.email | default:''}}"
                    type="email"
                    class="form-control"
                    placeholder="Enter new email"
                  />
                </div>
                <div class="mb-3">
                  <label class="form-label">Phone</label>
                  <input
                    name="phone_number"
                    value="{{data.phone_number | default:''}}"
                    type="text"
                    class="form-control"
                    placeholder="Phone Number"
                  />
                </div>
                <div class="mb-3">
                  <label class="form-label">Profile Image</label>
                  <input
                    name="img_url"
                    value="{{data.url.url}}"
                    type="file"
                    class="form-control"
                    placeholder="Phone Number"
                  />
                </div>
                <div class="mb-3">
                  <label class="form-label">Address</label>
                  <textarea
                    value="{{data.address | default:''}}"
                    class="form-control"
                    name="address"
                    id=""
                  >
                     {{data.address}}</textarea>
                </div>
                <button type="submit" class="btn btn-danger">
                  Update Settings
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- ========= Main Content end  =============== -->

{% endblock %}
